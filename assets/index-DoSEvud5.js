import{h as ge,i as je,bF as Ne,k as pe,aA as A,l as S,r as a,H as he,bG as we,g as M,aC as Oe,as as Ae,I as fe,bH as Le,bI as ye,o as Xe,a2 as Ce,X as _e,b2 as Ve,d as Ze,j as d,aY as Ee,T as qe,aN as Ge,B as Ke,bh as Ue,aR as Qe}from"./index-ChNaTDJB.js";import{a as Je}from"./subscriptions-BrnBd81l.js";import{d as U}from"./dayjs.min-CThvwJT1.js";import"./ar-DdtyrfkI.js";import{i as ke,a as et}from"./isSameOrAfter-C7WU1ZvW.js";import{u as tt}from"./useQuery-CdBRgHUp.js";import{A as nt}from"./index-vl74qY3d.js";import{S as Re,E as ue}from"./index-D4CopvM-.js";import{C as ve}from"./index-FVUtTp37.js";import{r as ot,s as rt,v as at,R as st,q as it}from"./index-_CcmTA8R.js";import{a as lt,R as ct}from"./ReadOutlined-6v0xUz2W.js";import{C as Ie,R as dt,a as ut,b as mt,c as gt}from"./LinkOutlined-BDtVtpVG.js";import{L as de}from"./index-tHDxZ9y9.js";import{R as pt}from"./UnorderedListOutlined-B49uEoLA.js";import{R as ht}from"./VideoCameraOutlined-NUy7sq3G.js";import"./useIcons-Ba7_GIgP.js";import"./Pagination-DT0J7HLD.js";const bt=new A("antStatusProcessing",{"0%":{transform:"scale(0.8)",opacity:.5},"100%":{transform:"scale(2.4)",opacity:0}}),ft=new A("antZoomBadgeIn",{"0%":{transform:"scale(0) translate(50%, -50%)",opacity:0},"100%":{transform:"scale(1) translate(50%, -50%)"}}),yt=new A("antZoomBadgeOut",{"0%":{transform:"scale(1) translate(50%, -50%)"},"100%":{transform:"scale(0) translate(50%, -50%)",opacity:0}}),Ct=new A("antNoWrapperZoomBadgeIn",{"0%":{transform:"scale(0)",opacity:0},"100%":{transform:"scale(1)"}}),vt=new A("antNoWrapperZoomBadgeOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0)",opacity:0}}),$t=new A("antBadgeLoadingCircle",{"0%":{transformOrigin:"50%"},"100%":{transform:"translate(50%, -50%) rotate(360deg)",transformOrigin:"50%"}}),xt=e=>{const{componentCls:t,iconCls:o,antCls:n,badgeShadowSize:r,textFontSize:c,textFontSizeSM:i,statusSize:b,dotSize:f,textFontWeight:x,indicatorHeight:p,indicatorHeightSM:g,marginXS:s,calc:u}=e,l=`${n}-scroll-number`,$=Ne(e,(y,j)=>{let{darkColor:C}=j;return{[`&${t} ${t}-color-${y}`]:{background:C,[`&:not(${t}-count)`]:{color:C},"a:hover &":{background:C}}}});return{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},pe(e)),{position:"relative",display:"inline-block",width:"fit-content",lineHeight:1,[`${t}-count`]:{display:"inline-flex",justifyContent:"center",zIndex:e.indicatorZIndex,minWidth:p,height:p,color:e.badgeTextColor,fontWeight:x,fontSize:c,lineHeight:S(p),whiteSpace:"nowrap",textAlign:"center",background:e.badgeColor,borderRadius:u(p).div(2).equal(),boxShadow:`0 0 0 ${S(r)} ${e.badgeShadowColor}`,transition:`background ${e.motionDurationMid}`,a:{color:e.badgeTextColor},"a:hover":{color:e.badgeTextColor},"a:hover &":{background:e.badgeColorHover}},[`${t}-count-sm`]:{minWidth:g,height:g,fontSize:i,lineHeight:S(g),borderRadius:u(g).div(2).equal()},[`${t}-multiple-words`]:{padding:`0 ${S(e.paddingXS)}`,bdi:{unicodeBidi:"plaintext"}},[`${t}-dot`]:{zIndex:e.indicatorZIndex,width:f,minWidth:f,height:f,background:e.badgeColor,borderRadius:"100%",boxShadow:`0 0 0 ${S(r)} ${e.badgeShadowColor}`},[`${t}-count, ${t}-dot, ${l}-custom-component`]:{position:"absolute",top:0,insetInlineEnd:0,transform:"translate(50%, -50%)",transformOrigin:"100% 0%",[`&${o}-spin`]:{animationName:$t,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear"}},[`&${t}-status`]:{lineHeight:"inherit",verticalAlign:"baseline",[`${t}-status-dot`]:{position:"relative",top:-1,display:"inline-block",width:b,height:b,verticalAlign:"middle",borderRadius:"50%"},[`${t}-status-success`]:{backgroundColor:e.colorSuccess},[`${t}-status-processing`]:{overflow:"visible",color:e.colorInfo,backgroundColor:e.colorInfo,borderColor:"currentcolor","&::after":{position:"absolute",top:0,insetInlineStart:0,width:"100%",height:"100%",borderWidth:r,borderStyle:"solid",borderColor:"inherit",borderRadius:"50%",animationName:bt,animationDuration:e.badgeProcessingDuration,animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",content:'""'}},[`${t}-status-default`]:{backgroundColor:e.colorTextPlaceholder},[`${t}-status-error`]:{backgroundColor:e.colorError},[`${t}-status-warning`]:{backgroundColor:e.colorWarning},[`${t}-status-text`]:{marginInlineStart:s,color:e.colorText,fontSize:e.fontSize}}}),$),{[`${t}-zoom-appear, ${t}-zoom-enter`]:{animationName:ft,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack,animationFillMode:"both"},[`${t}-zoom-leave`]:{animationName:yt,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack,animationFillMode:"both"},[`&${t}-not-a-wrapper`]:{[`${t}-zoom-appear, ${t}-zoom-enter`]:{animationName:Ct,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack},[`${t}-zoom-leave`]:{animationName:vt,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack},[`&:not(${t}-status)`]:{verticalAlign:"middle"},[`${l}-custom-component, ${t}-count`]:{transform:"none"},[`${l}-custom-component, ${l}`]:{position:"relative",top:"auto",display:"block",transformOrigin:"50% 50%"}},[l]:{overflow:"hidden",transition:`all ${e.motionDurationMid} ${e.motionEaseOutBack}`,[`${l}-only`]:{position:"relative",display:"inline-block",height:p,transition:`all ${e.motionDurationSlow} ${e.motionEaseOutBack}`,WebkitTransformStyle:"preserve-3d",WebkitBackfaceVisibility:"hidden",[`> p${l}-only-unit`]:{height:p,margin:0,WebkitTransformStyle:"preserve-3d",WebkitBackfaceVisibility:"hidden"}},[`${l}-symbol`]:{verticalAlign:"top"}},"&-rtl":{direction:"rtl",[`${t}-count, ${t}-dot, ${l}-custom-component`]:{transform:"translate(-50%, -50%)"}}})}},Me=e=>{const{fontHeight:t,lineWidth:o,marginXS:n,colorBorderBg:r}=e,c=t,i=o,b=e.colorTextLightSolid,f=e.colorError,x=e.colorErrorHover;return je(e,{badgeFontHeight:c,badgeShadowSize:i,badgeTextColor:b,badgeColor:f,badgeColorHover:x,badgeShadowColor:r,badgeProcessingDuration:"1.2s",badgeRibbonOffset:n,badgeRibbonCornerTransform:"scaleY(0.75)",badgeRibbonCornerFilter:"brightness(75%)"})},Te=e=>{const{fontSize:t,lineHeight:o,fontSizeSM:n,lineWidth:r}=e;return{indicatorZIndex:"auto",indicatorHeight:Math.round(t*o)-2*r,indicatorHeightSM:t,dotSize:n/2,textFontSize:n,textFontSizeSM:n,textFontWeight:"normal",statusSize:n/2}},St=ge("Badge",e=>{const t=Me(e);return xt(t)},Te),jt=e=>{const{antCls:t,badgeFontHeight:o,marginXS:n,badgeRibbonOffset:r,calc:c}=e,i=`${t}-ribbon`,b=`${t}-ribbon-wrapper`,f=Ne(e,(x,p)=>{let{darkColor:g}=p;return{[`&${i}-color-${x}`]:{background:g,color:g}}});return{[b]:{position:"relative"},[i]:Object.assign(Object.assign(Object.assign(Object.assign({},pe(e)),{position:"absolute",top:n,padding:`0 ${S(e.paddingXS)}`,color:e.colorPrimary,lineHeight:S(o),whiteSpace:"nowrap",backgroundColor:e.colorPrimary,borderRadius:e.borderRadiusSM,[`${i}-text`]:{color:e.badgeTextColor},[`${i}-corner`]:{position:"absolute",top:"100%",width:r,height:r,color:"currentcolor",border:`${S(c(r).div(2).equal())} solid`,transform:e.badgeRibbonCornerTransform,transformOrigin:"top",filter:e.badgeRibbonCornerFilter}}),f),{[`&${i}-placement-end`]:{insetInlineEnd:c(r).mul(-1).equal(),borderEndEndRadius:0,[`${i}-corner`]:{insetInlineEnd:0,borderInlineEndColor:"transparent",borderBlockEndColor:"transparent"}},[`&${i}-placement-start`]:{insetInlineStart:c(r).mul(-1).equal(),borderEndStartRadius:0,[`${i}-corner`]:{insetInlineStart:0,borderBlockEndColor:"transparent",borderInlineStartColor:"transparent"}},"&-rtl":{direction:"rtl"}})}},Nt=ge(["Badge","Ribbon"],e=>{const t=Me(e);return jt(t)},Te),wt=e=>{const{className:t,prefixCls:o,style:n,color:r,children:c,text:i,placement:b="end",rootClassName:f}=e,{getPrefixCls:x,direction:p}=a.useContext(he),g=x("ribbon",o),s=`${g}-wrapper`,[u,l,$]=Nt(g,s),y=we(r,!1),j=M(g,`${g}-placement-${b}`,{[`${g}-rtl`]:p==="rtl",[`${g}-color-${r}`]:y},t),C={},w={};return r&&!y&&(C.background=r,w.color=r),u(a.createElement("div",{className:M(s,f,l,$)},c,a.createElement("div",{className:M(j,l),style:Object.assign(Object.assign({},C),n)},a.createElement("span",{className:`${g}-text`},i),a.createElement("div",{className:`${g}-corner`,style:w}))))},$e=e=>{const{prefixCls:t,value:o,current:n,offset:r=0}=e;let c;return r&&(c={position:"absolute",top:`${r}00%`,left:0}),a.createElement("span",{style:c,className:M(`${t}-only-unit`,{current:n})},o)};function Ot(e,t,o){let n=e,r=0;for(;(n+10)%10!==t;)n+=o,r+=o;return r}const Et=e=>{const{prefixCls:t,count:o,value:n}=e,r=Number(n),c=Math.abs(o),[i,b]=a.useState(r),[f,x]=a.useState(c),p=()=>{b(r),x(c)};a.useEffect(()=>{const u=setTimeout(p,1e3);return()=>clearTimeout(u)},[r]);let g,s;if(i===r||Number.isNaN(r)||Number.isNaN(i))g=[a.createElement($e,Object.assign({},e,{key:r,current:!0}))],s={transition:"none"};else{g=[];const u=r+10,l=[];for(let C=r;C<=u;C+=1)l.push(C);const $=f<c?1:-1,y=l.findIndex(C=>C%10===i);g=($<0?l.slice(0,y+1):l.slice(y)).map((C,w)=>{const L=C%10;return a.createElement($e,Object.assign({},e,{key:C,value:L,offset:$<0?w-y:w,current:w===y}))}),s={transform:`translateY(${-Ot(i,r,$)}00%)`}}return a.createElement("span",{className:`${t}-only`,style:s,onTransitionEnd:p},g)};var Rt=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(o[n[r]]=e[n[r]]);return o};const It=a.forwardRef((e,t)=>{const{prefixCls:o,count:n,className:r,motionClassName:c,style:i,title:b,show:f,component:x="sup",children:p}=e,g=Rt(e,["prefixCls","count","className","motionClassName","style","title","show","component","children"]),{getPrefixCls:s}=a.useContext(he),u=s("scroll-number",o),l=Object.assign(Object.assign({},g),{"data-show":f,style:i,className:M(u,r,c),title:b});let $=n;if(n&&Number(n)%1===0){const y=String(n).split("");$=a.createElement("bdi",null,y.map((j,C)=>a.createElement(Et,{prefixCls:u,count:Number(n),value:j,key:y.length-C})))}return i!=null&&i.borderColor&&(l.style=Object.assign(Object.assign({},i),{boxShadow:`0 0 0 1px ${i.borderColor} inset`})),p?Oe(p,y=>({className:M(`${u}-custom-component`,y==null?void 0:y.className,c)})):a.createElement(x,Object.assign({},l,{ref:t}),$)});var Mt=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(o[n[r]]=e[n[r]]);return o};const Tt=a.forwardRef((e,t)=>{var o,n,r,c,i;const{prefixCls:b,scrollNumberPrefixCls:f,children:x,status:p,text:g,color:s,count:u=null,overflowCount:l=99,dot:$=!1,size:y="default",title:j,offset:C,style:w,className:L,rootClassName:X,classNames:E,styles:O,showZero:_=!1}=e,Q=Mt(e,["prefixCls","scrollNumberPrefixCls","children","status","text","color","count","overflowCount","dot","size","title","offset","style","className","rootClassName","classNames","styles","showZero"]),{getPrefixCls:J,direction:V,badge:h}=a.useContext(he),v=J("badge",b),[k,ne,oe]=St(v),W=u>l?`${l}+`:u,R=W==="0"||W===0,re=u===null||R&&!_,B=(p!=null||s!=null)&&re,D=$&&!R,I=D?"":W,H=a.useMemo(()=>(I==null||I===""||R&&!_)&&!D,[I,R,_,D]),Z=a.useRef(u);H||(Z.current=u);const z=Z.current,q=a.useRef(I);H||(q.current=I);const Y=q.current,ee=a.useRef(D);H||(ee.current=D);const F=a.useMemo(()=>{if(!C)return Object.assign(Object.assign({},h==null?void 0:h.style),w);const P={marginTop:C[1]};return V==="rtl"?P.left=parseInt(C[0],10):P.right=-parseInt(C[0],10),Object.assign(Object.assign(Object.assign({},P),h==null?void 0:h.style),w)},[V,C,w,h==null?void 0:h.style]),ae=j??(typeof z=="string"||typeof z=="number"?z:void 0),T=H||!g?null:a.createElement("span",{className:`${v}-status-text`},g),se=!z||typeof z!="object"?void 0:Oe(z,P=>({style:Object.assign(Object.assign({},F),P.style)})),m=we(s,!1),N=M(E==null?void 0:E.indicator,(o=h==null?void 0:h.classNames)===null||o===void 0?void 0:o.indicator,{[`${v}-status-dot`]:B,[`${v}-status-${p}`]:!!p,[`${v}-color-${s}`]:m}),G={};s&&!m&&(G.color=s,G.background=s);const be=M(v,{[`${v}-status`]:B,[`${v}-not-a-wrapper`]:!x,[`${v}-rtl`]:V==="rtl"},L,X,h==null?void 0:h.className,(n=h==null?void 0:h.classNames)===null||n===void 0?void 0:n.root,E==null?void 0:E.root,ne,oe);if(!x&&B){const P=F.color;return k(a.createElement("span",Object.assign({},Q,{className:be,style:Object.assign(Object.assign(Object.assign({},O==null?void 0:O.root),(r=h==null?void 0:h.styles)===null||r===void 0?void 0:r.root),F)}),a.createElement("span",{className:N,style:Object.assign(Object.assign(Object.assign({},O==null?void 0:O.indicator),(c=h==null?void 0:h.styles)===null||c===void 0?void 0:c.indicator),G)}),g&&a.createElement("span",{style:{color:P},className:`${v}-status-text`},g)))}return k(a.createElement("span",Object.assign({ref:t},Q,{className:be,style:Object.assign(Object.assign({},(i=h==null?void 0:h.styles)===null||i===void 0?void 0:i.root),O==null?void 0:O.root)}),x,a.createElement(Ae,{visible:!H,motionName:`${v}-zoom`,motionAppear:!1,motionDeadline:1e3},P=>{let{className:Ye}=P;var ie,le;const We=J("scroll-number",f),ce=ee.current,Fe=M(E==null?void 0:E.indicator,(ie=h==null?void 0:h.classNames)===null||ie===void 0?void 0:ie.indicator,{[`${v}-dot`]:ce,[`${v}-count`]:!ce,[`${v}-count-sm`]:y==="small",[`${v}-multiple-words`]:!ce&&Y&&Y.toString().length>1,[`${v}-status-${p}`]:!!p,[`${v}-color-${s}`]:m});let te=Object.assign(Object.assign(Object.assign({},O==null?void 0:O.indicator),(le=h==null?void 0:h.styles)===null||le===void 0?void 0:le.indicator),F);return s&&!m&&(te=te||{},te.background=s),a.createElement(It,{prefixCls:We,show:!H,motionClassName:Ye,className:Fe,count:Y,title:ae,style:te,key:"scrollNumber"},se)}),T))}),Pe=Tt;Pe.Ribbon=wt;const Pt=10,Bt=20;function Ht(e){const{fullscreen:t,validRange:o,generateConfig:n,locale:r,prefixCls:c,value:i,onChange:b,divRef:f}=e,x=n.getYear(i||n.getNow());let p=x-Pt,g=p+Bt;o&&(p=n.getYear(o[0]),g=n.getYear(o[1])+1);const s=r&&r.year==="年"?"年":"",u=[];for(let l=p;l<g;l++)u.push({label:`${l}${s}`,value:l});return a.createElement(Re,{size:t?void 0:"small",options:u,value:x,className:`${c}-year-select`,onChange:l=>{let $=n.setYear(i,l);if(o){const[y,j]=o,C=n.getYear($),w=n.getMonth($);C===n.getYear(j)&&w>n.getMonth(j)&&($=n.setMonth($,n.getMonth(j))),C===n.getYear(y)&&w<n.getMonth(y)&&($=n.setMonth($,n.getMonth(y)))}b($)},getPopupContainer:()=>f.current})}function zt(e){const{prefixCls:t,fullscreen:o,validRange:n,value:r,generateConfig:c,locale:i,onChange:b,divRef:f}=e,x=c.getMonth(r||c.getNow());let p=0,g=11;if(n){const[l,$]=n,y=c.getYear(r);c.getYear($)===y&&(g=c.getMonth($)),c.getYear(l)===y&&(p=c.getMonth(l))}const s=i.shortMonths||c.locale.getShortMonths(i.locale),u=[];for(let l=p;l<=g;l+=1)u.push({label:s[l],value:l});return a.createElement(Re,{size:o?void 0:"small",className:`${t}-month-select`,value:x,options:u,onChange:l=>{b(c.setMonth(r,l))},getPopupContainer:()=>f.current})}function Dt(e){const{prefixCls:t,locale:o,mode:n,fullscreen:r,onModeChange:c}=e;return a.createElement(Le,{onChange:i=>{let{target:{value:b}}=i;c(b)},value:n,size:r?void 0:"small",className:`${t}-mode-switch`},a.createElement(ye,{value:"month"},o.month),a.createElement(ye,{value:"year"},o.year))}function Yt(e){const{prefixCls:t,fullscreen:o,mode:n,onChange:r,onModeChange:c}=e,i=a.useRef(null),b=a.useContext(fe),f=a.useMemo(()=>Object.assign(Object.assign({},b),{isFormItemInput:!1}),[b]),x=Object.assign(Object.assign({},e),{fullscreen:o,divRef:i});return a.createElement("div",{className:`${t}-header`,ref:i},a.createElement(fe.Provider,{value:f},a.createElement(Ht,Object.assign({},x,{onChange:p=>{r(p,"year")}})),n==="month"&&a.createElement(zt,Object.assign({},x,{onChange:p=>{r(p,"month")}}))),a.createElement(Dt,Object.assign({},x,{onModeChange:c})))}const Wt=e=>{const{calendarCls:t,componentCls:o,fullBg:n,fullPanelBg:r,itemActiveBg:c}=e;return{[t]:Object.assign(Object.assign(Object.assign({},rt(e)),pe(e)),{background:n,"&-rtl":{direction:"rtl"},[`${t}-header`]:{display:"flex",justifyContent:"flex-end",padding:`${S(e.paddingSM)} 0`,[`${t}-year-select`]:{minWidth:e.yearControlWidth},[`${t}-month-select`]:{minWidth:e.monthControlWidth,marginInlineStart:e.marginXS},[`${t}-mode-switch`]:{marginInlineStart:e.marginXS}}}),[`${t} ${o}-panel`]:{background:r,border:0,borderTop:`${S(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,borderRadius:0,[`${o}-month-panel, ${o}-date-panel`]:{width:"auto"},[`${o}-body`]:{padding:`${S(e.paddingXS)} 0`},[`${o}-content`]:{width:"100%"}},[`${t}-mini`]:{borderRadius:e.borderRadiusLG,[`${t}-header`]:{paddingInlineEnd:e.paddingXS,paddingInlineStart:e.paddingXS},[`${o}-panel`]:{borderRadius:`0 0 ${S(e.borderRadiusLG)} ${S(e.borderRadiusLG)}`},[`${o}-content`]:{height:e.miniContentHeight,th:{height:"auto",padding:0,lineHeight:S(e.weekHeight)}},[`${o}-cell::before`]:{pointerEvents:"none"}},[`${t}${t}-full`]:{[`${o}-panel`]:{display:"block",width:"100%",textAlign:"end",background:n,border:0,[`${o}-body`]:{"th, td":{padding:0},th:{height:"auto",paddingInlineEnd:e.paddingSM,paddingBottom:e.paddingXXS,lineHeight:S(e.weekHeight)}}},[`${o}-cell-week ${o}-cell-inner`]:{display:"block",borderRadius:0,borderTop:`${S(e.lineWidthBold)} ${e.lineType} ${e.colorSplit}`,width:"100%",height:e.calc(e.dateValueHeight).add(e.dateContentHeight).add(e.calc(e.paddingXS).div(2)).add(e.lineWidthBold).equal()},[`${o}-cell`]:{"&::before":{display:"none"},"&:hover":{[`${t}-date`]:{background:e.controlItemBgHover}},[`${t}-date-today::before`]:{display:"none"},[`&-in-view${o}-cell-selected`]:{[`${t}-date, ${t}-date-today`]:{background:c}},"&-selected, &-selected:hover":{[`${t}-date, ${t}-date-today`]:{[`${t}-date-value`]:{color:e.colorPrimary}}}},[`${t}-date`]:{display:"block",width:"auto",height:"auto",margin:`0 ${S(e.calc(e.marginXS).div(2).equal())}`,padding:`${S(e.calc(e.paddingXS).div(2).equal())} ${S(e.paddingXS)} 0`,border:0,borderTop:`${S(e.lineWidthBold)} ${e.lineType} ${e.colorSplit}`,borderRadius:0,transition:`background ${e.motionDurationSlow}`,"&-value":{lineHeight:S(e.dateValueHeight),transition:`color ${e.motionDurationSlow}`},"&-content":{position:"static",width:"auto",height:e.dateContentHeight,overflowY:"auto",color:e.colorText,lineHeight:e.lineHeight,textAlign:"start"},"&-today":{borderColor:e.colorPrimary,[`${t}-date-value`]:{color:e.colorText}}}},[`@media only screen and (max-width: ${S(e.screenXS)}) `]:{[t]:{[`${t}-header`]:{display:"block",[`${t}-year-select`]:{width:"50%"},[`${t}-month-select`]:{width:`calc(50% - ${S(e.paddingXS)})`},[`${t}-mode-switch`]:{width:"100%",marginTop:e.marginXS,marginInlineStart:0,"> label":{width:"50%",textAlign:"center"}}}}}}},Ft=e=>Object.assign({fullBg:e.colorBgContainer,fullPanelBg:e.colorBgContainer,itemActiveBg:e.controlItemBgActive,yearControlWidth:80,monthControlWidth:70,miniContentHeight:256},at(e)),At=ge("Calendar",e=>{const t=`${e.componentCls}-calendar`,o=je(e,ot(e),{calendarCls:t,pickerCellInnerCls:`${e.componentCls}-cell-inner`,dateValueHeight:e.controlHeightSM,weekHeight:e.calc(e.controlHeightSM).mul(.75).equal(),dateContentHeight:e.calc(e.calc(e.fontHeightSM).add(e.marginXS)).mul(3).add(e.calc(e.lineWidth).mul(2)).equal()});return[Wt(o)]},Ft),Be=(e,t,o)=>{const{getYear:n}=o;return e&&t&&n(e)===n(t)},me=(e,t,o)=>{const{getMonth:n}=o;return Be(e,t,o)&&n(e)===n(t)},xe=(e,t,o)=>{const{getDate:n}=o;return me(e,t,o)&&n(e)===n(t)},He=e=>o=>{const{prefixCls:n,className:r,rootClassName:c,style:i,dateFullCellRender:b,dateCellRender:f,monthFullCellRender:x,monthCellRender:p,cellRender:g,fullCellRender:s,headerRender:u,value:l,defaultValue:$,disabledDate:y,mode:j,validRange:C,fullscreen:w=!0,showWeek:L,onChange:X,onPanelChange:E,onSelect:O}=o,{getPrefixCls:_,direction:Q,className:J,style:V}=Xe("calendar"),h=_("picker",n),v=`${h}-calendar`,[k,ne,oe]=At(h,v),W=e.getNow(),[R,re]=Ce(()=>l||e.getNow(),{defaultValue:$,value:l}),[B,D]=Ce("month",{value:j}),I=a.useMemo(()=>B==="year"?"month":"date",[B]),H=a.useCallback(m=>(C?e.isAfter(C[0],m)||e.isAfter(m,C[1]):!1)||!!(y!=null&&y(m)),[y,C]),Z=(m,N)=>{E==null||E(m,N)},z=m=>{re(m),xe(m,R,e)||((I==="date"&&!me(m,R,e)||I==="month"&&!Be(m,R,e))&&Z(m,B),X==null||X(m))},q=m=>{D(m),Z(R,m)},Y=(m,N)=>{z(m),O==null||O(m,{source:N})},ee=a.useCallback((m,N)=>s?s(m,N):b?b(m):a.createElement("div",{className:M(`${h}-cell-inner`,`${v}-date`,{[`${v}-date-today`]:xe(W,m,e)})},a.createElement("div",{className:`${v}-date-value`},String(e.getDate(m)).padStart(2,"0")),a.createElement("div",{className:`${v}-date-content`},g?g(m,N):f==null?void 0:f(m))),[b,f,g,s]),F=a.useCallback((m,N)=>{if(s)return s(m,N);if(x)return x(m);const G=N.locale.shortMonths||e.locale.getShortMonths(N.locale.locale);return a.createElement("div",{className:M(`${h}-cell-inner`,`${v}-date`,{[`${v}-date-today`]:me(W,m,e)})},a.createElement("div",{className:`${v}-date-value`},G[e.getMonth(m)]),a.createElement("div",{className:`${v}-date-content`},g?g(m,N):p==null?void 0:p(m)))},[x,p,g,s]),[ae]=_e("Calendar",Ve),T=Object.assign(Object.assign({},ae),o.locale),se=(m,N)=>{if(N.type==="date")return ee(m,N);if(N.type==="month")return F(m,Object.assign(Object.assign({},N),{locale:T==null?void 0:T.lang}))};return k(a.createElement("div",{className:M(v,{[`${v}-full`]:w,[`${v}-mini`]:!w,[`${v}-rtl`]:Q==="rtl"},J,r,c,ne,oe),style:Object.assign(Object.assign({},V),i)},u?u({value:R,type:B,onChange:m=>{Y(m,"customize")},onTypeChange:q}):a.createElement(Yt,{prefixCls:v,value:R,generateConfig:e,mode:B,fullscreen:w,locale:T==null?void 0:T.lang,validRange:C,onChange:Y,onModeChange:q}),a.createElement(st,{value:R,prefixCls:h,locale:T==null?void 0:T.lang,generateConfig:e,cellRender:se,onSelect:m=>{Y(m,I)},mode:I,picker:I,disabledDate:H,hideHeader:!0,showWeek:L})))},ze=He(it);ze.generateCalendar=He;U.locale("ar");U.extend(ke);U.extend(et);const{Content:Lt}=Ee,{Title:De,Text:K,Paragraph:Xt,Link:_t}=qe,{Panel:Vt}=Ie,Zt=e=>{switch(e){case"video":case"embedded":return d.jsx(ht,{});case"pdf":return d.jsx(gt,{});case"audio":return d.jsx(mt,{});case"docx":return d.jsx(ut,{});default:return d.jsx(dt,{})}},Se=e=>{switch(e){case"video":return"red";case"pdf":return"blue";case"audio":return"purple";case"docx":return"cyan";case"embedded":return"orange";default:return"default"}},qt=e=>{window.location.href=`#subscriptions/${e}`},Gt={marginBottom:"12px"},Kt={marginBottom:"10px",paddingBottom:"8px",borderBottom:"1px dashed #f0f0f0",fontSize:"0.85em",lineHeight:1.4},Ut=({tasksGroupedByDate:e,initialDate:t})=>{const[o,n]=a.useState(t||U()),r=a.useRef(null),c=a.useMemo(()=>{const s=o.format("YYYY-MM-DD");return(e[s]||[]).sort((l,$)=>l.programName.localeCompare($.programName))},[o,e]),i=s=>{const u=s.format("YYYY-MM-DD"),l=e[u]||[];return l.length===0?null:d.jsxs("ul",{className:"events",style:{listStyle:"none",margin:0,padding:"0 2px",fontSize:"0.75em",lineHeight:1.3},children:[" ",l.slice(0,2).map($=>{var y,j;return d.jsxs("li",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[" ",d.jsx(Pe,{status:"processing",color:Se(((j=(y=$.lessons)==null?void 0:y[0])==null?void 0:j.type)||"default")})," ",d.jsx("span",{style:{marginRight:"3px"},children:$.programName.substring(0,20)})," "]},$.id)})," ",l.length>2&&d.jsx("li",{style:{textAlign:"center"},children:d.jsx(K,{type:"secondary",children:"..."})})," "]})},b=s=>{n(s)},f=s=>{console.log(s)};a.useEffect(()=>{if(o&&r.current){const s=setTimeout(()=>{var u;(u=r.current)==null||u.scrollIntoView({behavior:"smooth",block:"start"})},150);return()=>clearTimeout(s)}},[o]);const x={marginBottom:"24px"},p={marginTop:"16px",marginBottom:"16px",borderBottom:"1px solid #f0f0f0",paddingBottom:"10px"},g=(s,u)=>u.type==="date"||u.type==="month"?i(s):u.originNode;return d.jsxs("div",{children:[d.jsx(ve,{bordered:!1,style:x,children:d.jsx(ze,{cellRender:g,onSelect:b,onPanelChange:f,value:o})}),d.jsxs("div",{ref:r,children:[d.jsxs(De,{level:4,style:p,children:[" ","المهام ليوم: ",o.format("dddd, D MMMM YYYY")," "]}),c.length===0&&d.jsx(ue,{description:"لا توجد مهام مجدولة لهذا اليوم.",image:ue.PRESENTED_IMAGE_SIMPLE}),c.map(s=>d.jsxs(ve,{size:"small",bordered:!1,style:Gt,bodyStyle:{padding:"12px"},children:[d.jsxs("div",{style:Kt,children:[d.jsxs(K,{type:"secondary",children:[" ",d.jsx(lt,{style:{marginLeft:"5px"}})," ",s.programName," "]}),d.jsxs(K,{type:"secondary",style:{marginRight:"10px"},children:[" ",d.jsx(ct,{style:{marginLeft:"5px"}})," ",s.levelName," "]}),d.jsx(Ke,{type:"link",icon:d.jsx(Ue,{}),size:"small",onClick:()=>qt(s.subscriptionId),style:{float:"left",padding:"0 5px",fontSize:"0.85em"},children:"عرض التفاصيل"})]}),s.note&&d.jsx(Xt,{children:s.note}),!s.note&&s.lessons.length===0&&d.jsx(K,{type:"secondary",style:{display:"block"},children:"لا توجد تفاصيل إضافية."}),s.lessons&&s.lessons.length>0&&d.jsx(Ie,{ghost:!0,expandIconPosition:"right",size:"small",children:d.jsx(Vt,{header:d.jsxs(K,{type:"secondary",style:{fontSize:"0.9em"},children:[d.jsx(pt,{style:{marginLeft:"8px"}})," ","عرض الدروس (",s.lessons.length,")"]}),children:d.jsx(de,{size:"small",dataSource:s.lessons,renderItem:u=>d.jsxs(de.Item,{style:{padding:"6px 0"},children:[" ",d.jsx(de.Item.Meta,{avatar:Zt(u.type),title:d.jsx(_t,{href:`#/subscriptions/${s.subscriptionId}`,target:"_blank",rel:"noopener noreferrer",disabled:!u.url,children:u.title})})," ",d.jsx(Qe,{color:Se(u.type),children:u.type})," "]},u.id)})},`panel-task-${s.id}`)}),d.jsx("div",{style:{clear:"both"}})]},s.id))]})]})},hn=()=>{const{data:e,error:t,isLoading:o}=tt({queryKey:["subscriptions"],queryFn:()=>Je.get({}),refetchOnWindowFocus:!1});t&&Ze.error("فشل تحميل بيانات الاشتراكات.");const n=a.useMemo(()=>!(e!=null&&e.items)||(e==null?void 0:e.items.length)===0?[]:e==null?void 0:e.items.flatMap(i=>i.program.levels.flatMap(b=>((b==null?void 0:b.tasks)||[]).map(f=>({...f,programId:i.program.id,programName:i.program.name||"N/A",levelName:b.name||"N/A",subscriptionId:(i==null?void 0:i.id)||""})))),[e==null?void 0:e.items]),r=a.useMemo(()=>n.reduce((i,b)=>{try{const f=U(b.date).format("YYYY-MM-DD");i[f]||(i[f]=[]),i[f].push(b)}catch(f){console.error("Err group:",b,f)}return i},{}),[n]),c={padding:"24px 48px"};return d.jsx(Ee,{style:{minHeight:"100vh"},children:d.jsxs(Lt,{style:c,children:[d.jsx(De,{level:2,style:{marginBottom:"24px",textAlign:"right"},children:"الجدول الزمني"}),o&&d.jsx("div",{style:{textAlign:"center",padding:"50px"},children:d.jsx(Ge,{size:"large",tip:"جاري تحميل..."})}),t&&!o&&d.jsx(nt,{message:"خطأ في تحميل البيانات",description:t.message,type:"error",showIcon:!0,style:{marginBottom:"24px"}}),!o&&!t&&(e==null?void 0:e.items.length)===0&&d.jsx(ue,{description:"أنت غير مشترك في أي برامج نشطة حالياً."}),!o&&!t&&((e==null?void 0:e.items.length)??0)>0&&d.jsx(Ut,{tasksGroupedByDate:r})]})})};export{hn as default};
