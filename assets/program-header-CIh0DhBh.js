import{aX as S,r as C,j as s,x as n,aU as m,aV as l,T as $,B as x,c as f,aJ as k,b as M}from"./index-D6AxIjPL.js";import{d as F}from"./dayjs.min-D144vE-5.js";import"./ar-B7uTiKiK.js";import{a as v}from"./subscriptions-ZflCNUT4.js";import{R as O}from"./ClusterOutlined-RMwEBkDI.js";import{R as P}from"./UnorderedListOutlined-JizRf90a.js";import{R as U}from"./VideoCameraOutlined-Dir1Dcg5.js";import{R as _}from"./PlayCircleOutlined-CYaBhS8f.js";import{M as A}from"./index-D9tzAjiC.js";const L="_shineButton_19phe_5",E={shineButton:L};F.locale("ar");const{Title:H,Text:I,Paragraph:N}=$,Y=({program:e})=>{var i,w,R;if(!e)return null;const t=S(),h=()=>{t(`/subscriptions/${e.subscriptionId}`)},[c,a]=C.useState(!1),d=()=>{a(!0)},p=((i=e.levels)==null?void 0:i.length)||0,b=((w=e.levels)==null?void 0:w.reduce((j,y)=>{var o;return j+(((o=y.tasks)==null?void 0:o.length)||0)},0))||0,r=((R=e.levels)==null?void 0:R.reduce((j,y)=>{var o;return j+(((o=y.tasks)==null?void 0:o.reduce((T,B)=>{var g;return T+(((g=B.lessons)==null?void 0:g.length)||0)},0))||0)},0))||0,u={backgroundImage:"linear-gradient(to right, #003d2b, #18a978)",padding:"24px 32px",borderRadius:"8px",color:"#fff",marginBottom:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",direction:"rtl"};return s.jsxs("div",{style:u,children:[s.jsx(W,{program:e,open:c,setOpen:a,msg:e.subscriptionId?n("app.actions.confirm-unsubscription"):`
                        ${n("app.actions.confirm-subscription")}
                        ${(e==null?void 0:e.subscriptionFormUrl)==null?"":"(سيظهر لك نموذج الإشتراك بعد التأكيد)"}
                        `}),s.jsxs(m,{justify:"space-between",align:"top",gutter:[16,8],children:[s.jsx(l,{flex:"auto",children:s.jsx(H,{level:2,style:{color:"#fff",margin:"0 0 8px 0"},children:e.name||"برنامج بدون عنوان"})}),s.jsx(l,{flex:"auto",style:{textAlign:"end"},children:s.jsx(x,{onClick:d,style:{background:"#fff",color:e.subscriptionId?"#e50d0d":"#18a978",fontWeight:"bold",border:"none"},children:e.subscriptionId?"إلغاء الإشتراك":"إشترك"},"subscribe")})]}),s.jsx(m,{justify:"space-between",align:"top",gutter:[16,8],children:s.jsx(l,{flex:"auto",children:s.jsx(N,{style:{color:"#eee",marginBottom:"16px"},ellipsis:{rows:2,expandable:!1},children:e.description||"لا يوجد وصف لهذا البرنامج."})})}),s.jsxs(m,{justify:"space-between",align:"top",gutter:[16,8],children:[s.jsx(l,{flex:"auto",children:s.jsxs(f,{size:"large",wrap:!0,children:[s.jsx(k,{title:"عدد المستويات",children:s.jsxs(f,{children:[" ",s.jsx(O,{})," ",s.jsxs(I,{style:{color:"#fff"},children:[p," مستويات"]})," "]})}),s.jsx(k,{title:"إجمالي عدد المهام",children:s.jsxs(f,{children:[" ",s.jsx(P,{})," ",s.jsxs(I,{style:{color:"#fff"},children:[b," مهام"]})," "]})}),s.jsx(k,{title:"إجمالي عدد الدروس",children:s.jsxs(f,{children:[" ",s.jsx(U,{})," ",s.jsxs(I,{style:{color:"#fff"},children:[r," دروس"]})," "]})})]})}),e.subscriptionId&&s.jsx(l,{flex:"auto",style:{textAlign:"end"},children:s.jsx(x,{className:E.shineButton,onClick:h,icon:s.jsx(_,{}),style:{background:"#fff",color:"#18a978",fontWeight:"bold",border:"none"},children:"مواصلة الدراسة"})})]})]})};function W({msg:e,program:t,open:h,setOpen:c}){const[a,d]=C.useState(!1),[p,b]=C.useState(e),r=M({mutationFn:()=>t.subscriptionId?v.destroy(t.subscriptionId):v.create({programId:t.id}),onSuccess(){window.location.reload()}}),u=()=>{r.mutate(),b(t.subscriptionId?n("app.actions.unsubscription is in progress"):n("app.actions.subscription is in progress")),!t.subscriptionId&&(t==null?void 0:t.subscriptionFormUrl)!=null&&window.open(t==null?void 0:t.subscriptionFormUrl,"_blank"),d(!0),setTimeout(()=>{c(!1),d(!1)},2e3)},i=()=>{console.log("Clicked cancel button"),c(!1)};return s.jsx(A,{title:p,open:h,onOk:u,footer:[s.jsx(x,{onClick:i,children:n("common.close")},"back"),s.jsx(x,{danger:t.subscriptionId!==void 0,type:"primary",loading:r.isPending,onClick:u,children:n("common.confirm")},"submit")],confirmLoading:a,onCancel:i,children:s.jsx("p",{children:t.name})},`modal${t.id}`)}export{Y as default};
