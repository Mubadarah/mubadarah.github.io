import{r as g,a4 as v,a5 as _,j as e,T as C,aJ as u,B as i}from"./index-ChNaTDJB.js";import"./ar-DdtyrfkI.js";import{c as R}from"./subscriptions-BrnBd81l.js";import{a as S,R as h}from"./SubscriptionTaskPlaylist-ORewrqPK.js";import{d as p}from"./dayjs.min-CThvwJT1.js";import{E}from"./index-D4CopvM-.js";import{C as k}from"./index-FVUtTp37.js";import{A as x}from"./index-vl74qY3d.js";var I={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},T=function(t,n){return g.createElement(v,_({},t,{ref:n,icon:I}))},o=g.forwardRef(T);const{Title:f,Paragraph:y,Text:s}=C;function D(r,t){if(!r)return null;if(t==="embedded"||t==="video"){const n=j(r);if(n)return`https://www.youtube.com/embed/${n}?autoplay=0&rel=0&modestbranding=1&cc_load_policy=1&hl=ar&enablejsapi=1`}return t==="pdf"?r:null}function j(r){try{const t=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,n=r.match(t);return n&&n[2].length===11?n[2]:null}catch{return null}}const M=({item:r})=>{const t={position:"relative",overflow:"hidden",backgroundColor:"#f0f2f5",flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"400px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.05)",padding:"16px",marginBottom:"16px"},n={position:"relative",paddingBottom:"56.25%",height:0,overflow:"hidden",backgroundColor:"#000",width:"100%",borderRadius:"inherit"},a={position:"absolute",top:0,left:0,width:"100%",height:"100%",border:"none"},m={width:"80%",maxWidth:"600px",marginTop:"20px"};if(!r)return e.jsx("div",{style:t,children:e.jsx(E,{description:"الرجاء تحديد درس أو واجب من القائمة لعرضه."})});if(r.itemType==="assignment"){const l=S(r.availableUntil),c=r.type==="exam"?"الاختبار":"الواجب";return e.jsx("div",{style:t,children:e.jsxs(k,{style:{width:"100%",maxWidth:600,textAlign:"center"},children:[e.jsxs(f,{level:3,children:[e.jsx(h,{style:{marginRight:8,color:"#1677ff"}}),c,": ",r.title]}),e.jsxs(y,{children:[e.jsx(s,{children:"آخر موعد للتسليم: "}),e.jsx(u,{title:p(r.availableUntil).format("dddd, D MMMM YYYY, h:mm a"),children:e.jsx(s,{type:l?"danger":"secondary",children:p(r.availableUntil).fromNow()})}),l&&e.jsx(s,{type:"danger",children:" (انتهى الوقت)"})]}),e.jsx(u,{title:l?"لقد انتهى الموعد المحدد لهذا الواجب":"",children:e.jsx("span",{children:e.jsxs(i,{type:"primary",size:"large",href:R(r),target:"_blank",rel:"noopener noreferrer",disabled:l,icon:e.jsx(h,{}),children:["الانتقال إلى ",c]})})})]})})}const d=D(r.url,r.type),w=()=>{switch(r.type){case"embedded":case"video":return d&&j(r.url)?e.jsx("div",{style:n,children:e.jsx("iframe",{style:a,src:d,title:r.title,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0},r.id)}):e.jsx("div",{style:t,children:e.jsxs("video",{controls:!0,style:{maxWidth:"100%",maxHeight:"calc(100% - 40px)",borderRadius:"inherit"},children:[e.jsx("source",{src:r.url}),"متصفحك لا يدعم الفيديو."]},r.id)});case"pdf":return e.jsx("div",{style:n,children:e.jsx("iframe",{style:a,src:r.url,title:r.title,allowFullScreen:!0,height:"100%",children:e.jsxs(y,{style:{padding:"20px"},children:[" ","لا يمكن عرض ملف PDF.",e.jsx(i,{type:"link",icon:e.jsx(o,{}),href:r.url,target:"_blank",download:!0,children:"تحميل"})]})},r.id)});case"audio":return e.jsxs("div",{style:t,children:[e.jsx(f,{level:4,children:r.title}),e.jsx("audio",{controls:!0,style:m,src:r.url,children:"متصفحك لا يدعم الصوت."},r.id)]});case"docx":return e.jsx("div",{style:t,children:e.jsx(x,{type:"info",showIcon:!0,message:`ملف وورد: ${r.title}`,description:e.jsx(i,{type:"primary",icon:e.jsx(o,{}),href:r.url,target:"_blank",download:!0,children:"تحميل المستند"})})});default:return e.jsx("div",{style:t,children:e.jsx(x,{type:"warning",showIcon:!0,message:`ملف: ${r.title}`,description:e.jsxs(e.Fragment,{children:["نوع الملف (",r.type,") غير مدعوم للعرض.",e.jsx("br",{}),e.jsx(i,{type:"link",icon:e.jsx(o,{}),href:r.url,target:"_blank",download:!0,children:"تحميل الملف"})]})})})}},b={flexGrow:1,display:"flex",flexDirection:"column",width:"100%"};return e.jsx("div",{style:b,children:w()})},H=Object.freeze(Object.defineProperty({__proto__:null,LessonContentViewer:M},Symbol.toStringTag,{value:"Module"}));export{M as L,o as R,H as a};
