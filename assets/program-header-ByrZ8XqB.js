import{p as M,aX as F,r as C,j as s,x as t,aU as y,aV as l,T as O,B as x,c as u,aJ as k,b as P}from"./index-ChNaTDJB.js";import{d as U}from"./dayjs.min-CThvwJT1.js";import"./ar-DdtyrfkI.js";import{a as g}from"./subscriptions-BrnBd81l.js";import{R as _}from"./ClusterOutlined-ccym6zm0.js";import{R as L}from"./UnorderedListOutlined-B49uEoLA.js";import{R as A}from"./VideoCameraOutlined-NUy7sq3G.js";import{R as E}from"./PlayCircleOutlined-D5a6Km5n.js";import{M as H}from"./index-DzxYmmsA.js";function N(){return M()}const W={useBreakpoint:N},z="_shineButton_19phe_5",G={shineButton:z};U.locale("ar");const{Title:J,Text:I,Paragraph:V}=O,{useBreakpoint:X}=W,is=({program:n})=>{var T,R,v;const e=X();if(!n)return null;const f=F(),c=()=>{f(`/subscriptions/${n.subscriptionId}`)},[p,i]=C.useState(!1),b=()=>{i(!0)},h=((T=n.levels)==null?void 0:T.length)||0,d=((R=n.levels)==null?void 0:R.reduce((j,m)=>{var o;return j+(((o=m.tasks)==null?void 0:o.length)||0)},0))||0,a=((v=n.levels)==null?void 0:v.reduce((j,m)=>{var o;return j+(((o=m.tasks)==null?void 0:o.reduce((S,$)=>{var w;return S+(((w=$.lessons)==null?void 0:w.length)||0)},0))||0)},0))||0,r={backgroundImage:"linear-gradient(to right, #003d2b, #18a978)",padding:e.md?"24px 32px":"16px",borderRadius:"8px",color:"#fff",marginBottom:"24px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",direction:"rtl"},B={textAlign:e.md?"end":"start"};return s.jsxs("div",{style:r,children:[s.jsx(q,{program:n,open:p,setOpen:i,msg:n.subscriptionId?t("app.actions.confirm-unsubscription"):`
                    ${t("app.actions.confirm-subscription")}
                    ${(n==null?void 0:n.subscriptionFormUrl)==null?"":"(سيظهر لك نموذج الإشتراك بعد التأكيد)"}
                `}),s.jsxs(y,{justify:"space-between",align:"middle",gutter:[16,16],children:[s.jsx(l,{xs:24,md:18,children:s.jsx(J,{level:e.md?2:3,style:{color:"#fff",margin:0},children:n.name||"برنامج بدون عنوان"})}),s.jsx(l,{xs:24,md:6,style:B,children:s.jsx(x,{onClick:b,block:!e.md,style:{background:"#fff",color:n.subscriptionId?"#e50d0d":"#18a978",fontWeight:"bold",border:"none"},children:n.subscriptionId?"إلغاء الإشتراك":"إشترك"},"subscribe")})]}),s.jsx(y,{style:{marginTop:"16px"},children:s.jsx(l,{span:24,children:s.jsx(V,{style:{color:"#eee",marginBottom:0},ellipsis:{rows:2,expandable:!1},children:n.description||"لا يوجد وصف لهذا البرنامج."})})}),s.jsxs(y,{justify:"space-between",align:"middle",gutter:[16,16],style:{marginTop:"24px"},children:[s.jsx(l,{xs:24,md:18,children:s.jsxs(u,{size:"large",wrap:!0,children:[s.jsx(k,{title:"عدد المستويات",children:s.jsxs(u,{children:[" ",s.jsx(_,{})," ",s.jsxs(I,{style:{color:"#fff"},children:[h," مستويات"]})," "]})}),s.jsx(k,{title:"إجمالي عدد المهام",children:s.jsxs(u,{children:[" ",s.jsx(L,{})," ",s.jsxs(I,{style:{color:"#fff"},children:[d," مهام"]})," "]})}),s.jsx(k,{title:"إجمالي عدد الدروس",children:s.jsxs(u,{children:[" ",s.jsx(A,{})," ",s.jsxs(I,{style:{color:"#fff"},children:[a," دروس"]})," "]})})]})}),n.subscriptionId&&s.jsx(l,{xs:24,md:6,style:B,children:s.jsx(x,{className:G.shineButton,onClick:c,icon:s.jsx(E,{}),block:!e.md,style:{background:"#fff",color:"#18a978",fontWeight:"bold",border:"none"},children:"مواصلة الدراسة"})})]})]})};function q({msg:n,program:e,open:f,setOpen:c}){const[p,i]=C.useState(!1),[b,h]=C.useState(n),d=P({mutationFn:()=>e.subscriptionId?g.destroy(e.subscriptionId):g.create({programId:e.id}),onSuccess(){window.location.reload()}}),a=()=>{d.mutate(),h(e.subscriptionId?t("app.actions.unsubscription is in progress"):t("app.actions.subscription is in progress")),!e.subscriptionId&&(e==null?void 0:e.subscriptionFormUrl)!=null&&window.open(e==null?void 0:e.subscriptionFormUrl,"_blank"),i(!0),setTimeout(()=>{c(!1),i(!1)},2e3)},r=()=>{console.log("Clicked cancel button"),c(!1)};return s.jsx(H,{title:b,open:f,onOk:a,footer:[s.jsx(x,{onClick:r,children:t("common.close")},"back"),s.jsx(x,{danger:e.subscriptionId!==void 0,type:"primary",loading:d.isPending,onClick:a,children:t("common.confirm")},"submit")],confirmLoading:p,onCancel:r,children:s.jsx("p",{children:e.name})},`modal${e.id}`)}export{is as default};
