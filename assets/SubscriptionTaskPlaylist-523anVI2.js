import{r as f,a4 as S,a5 as L,j as e,aH as v,aY as ee,ap as te,B as b,bB as oe,aJ as re,T as se,c as I,bc as R}from"./index-D6AxIjPL.js";import"./ar-B7uTiKiK.js";import{b as ae}from"./subscriptions-ZflCNUT4.js";import{d as c}from"./dayjs.min-D144vE-5.js";import{R as ne,a as ce,b as ie,c as le,C as $}from"./LinkOutlined-BT2KasNO.js";import{R as de}from"./VideoCameraOutlined-Dir1Dcg5.js";import{R as fe}from"./useIcons-CPckANyl.js";import{L as h}from"./index-dODVGVdm.js";import{R as pe}from"./ClockCircleOutlined-EPF-V70M.js";import{R as me}from"./PlayCircleOutlined-CYaBhS8f.js";var ue={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 512h-56c-4.4 0-8 3.6-8 8v320H184V184h320c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V520c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M355.9 534.9L354 653.8c-.1 8.9 7.1 16.2 16 16.2h.4l118-2.9c2-.1 4-.9 5.4-2.3l415.9-415c3.1-3.1 3.1-8.2 0-11.3L785.4 114.3c-1.6-1.6-3.6-2.3-5.7-2.3s-4.1.8-5.7 2.3l-415.8 415a8.3 8.3 0 00-2.3 5.6zm63.5 23.6L779.7 199l45.2 45.1-360.5 359.7-45.7 1.1.7-46.4z"}}]},name:"form",theme:"outlined"},xe=function(o,a){return f.createElement(S,L({},o,{ref:a,icon:ue}))},he=f.forwardRef(xe),ye={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},ge=function(o,a){return f.createElement(S,L({},o,{ref:a,icon:ye}))},je=f.forwardRef(ge);const{Sider:ve}=ee,{Text:y}=se,{Panel:be}=$,w=r=>{switch(r.type){case"video":case"embedded":return e.jsx(de,{});case"pdf":return e.jsx(le,{});case"audio":return e.jsx(ie,{});case"docx":return e.jsx(ce,{});case"exam":case"homework":return e.jsx(he,{});default:return e.jsx(ne,{})}},C=r=>{if(!r)return"تاريخ غير محدد";try{const o=c(r);return o.isValid()?o.format("dddd, D MMMM YYYY"):(console.warn("Invalid date passed to formatDateLocale:",r),"تاريخ غير صالح")}catch(o){return console.error("formatDateLocale Error:",r,o),"خطأ في التاريخ"}},z=r=>{if(!r)return!0;try{const o=c(r);return o.isValid()?o.isAfter(c(),"day"):!0}catch{return!0}},M=r=>{if(!r)return!1;try{const o=c(r);return o.isValid()?c().isAfter(o):!0}catch{return!0}},Ie=({levelTasks:r,selectedTaskId:o,selectedItemId:a,completedItems:g,visible:T,activeCollapseKey:k,onItemClick:B,onCollapseChange:H,onClose:V,allLevels:j,selectedLevelId:O,onLevelChange:E})=>{const p=j.find(t=>t.id===O),D=e.jsx(v,{onClick:({key:t})=>E(t),children:j.map(t=>e.jsx(v.Item,{children:t.name},t.id))}),Y={padding:"10px",height:"calc(100vh - 64px)",overflowY:"auto",transition:"all 0.2s ease-in-out",borderRight:"1px solid #e8e8e8"},P={display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px",paddingBottom:"10px",borderBottom:"1px solid #e0e0e0"},m={padding:"8px 12px",cursor:"pointer",borderRadius:"4px",marginBottom:"4px",transition:"background-color 0.2s ease, color 0.2s ease",backgroundColor:"transparent",color:"rgba(0, 0, 0, 0.85)",display:"flex",alignItems:"center"},_={...m,backgroundColor:"#1890ff",color:"#fff",fontWeight:500},A={...m,cursor:"not-allowed",color:"#aaa",backgroundColor:"#fafafa"},u={fontWeight:400,display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},W={...u,fontWeight:600,color:"#1890ff"},F={...u,color:"#aaa"};return e.jsxs(ve,{width:350,theme:"light",collapsible:!0,collapsed:!T,trigger:null,collapsedWidth:0,style:Y,children:[e.jsxs("div",{style:P,children:[e.jsx(te,{overlay:D,trigger:["click"],children:e.jsxs(b,{children:[(p==null?void 0:p.name)||"اختر المستوى"," ",e.jsx(fe,{})]})}),e.jsx(b,{icon:e.jsx(oe,{}),onClick:V,type:"text","aria-label":"إخفاء القائمة"})]}),e.jsx($,{accordion:!0,activeKey:k,onChange:H,children:r.map((t,J)=>{if(!t||!t.id)return console.warn("Skipping rendering of invalid task object:",t),null;const K=ae(t),n=z(t.date),q=t.lessons.map(s=>s.id).every(s=>g.has(s)),G=C(t.date),N=n?F:t.id===o?W:u;return e.jsx(be,{collapsible:n?"disabled":void 0,header:e.jsxs("div",{style:N,children:[e.jsxs(I,{direction:"vertical",size:0,children:[e.jsxs(y,{style:{color:"inherit"},children:[J+1,". ",G]}),t.note&&e.jsx(y,{type:"secondary",style:{fontSize:"0.85em"},children:t.note})]}),q&&e.jsx(R,{style:{fontSize:"14px"}}),n&&e.jsx(je,{style:{fontSize:"14px"}})]}),children:e.jsx(h,{size:"small",dataSource:K,renderItem:s=>{const Q=g.has(s.id),i=s.id===a&&t.id===o,l=s.itemType==="assignment"&&M(s.availableUntil),d=n||l,U=d?A:i?_:m,x=d?"#aaa":i?"#fff":"inherit",X=s.itemType==="assignment"?`${s.type==="exam"?"اختبار":"واجب"}: ${s.title}`:s.title,Z=l?"انتهى وقت التسليم":n?"المهمة مقفلة حالياً":"";return e.jsx(re,{title:Z,children:e.jsxs(h.Item,{onClick:()=>B(t.id,s.id,d),style:U,children:[e.jsx(h.Item.Meta,{avatar:e.jsx(I,{children:Q?e.jsx(R,{style:{color:i?"#fff":"#52c41a"}}):l?e.jsx(pe,{style:{color:x,marginLeft:"8px"}}):e.jsx("span",{style:{color:x,marginLeft:"8px"},children:w(s)})}),title:e.jsx(y,{style:{color:x},delete:l,children:X||"بدون عنوان"})}),i&&!d&&e.jsx(me,{style:{color:"#fff"}})]})})}})},t.id)})})]})},Be=Object.freeze(Object.defineProperty({__proto__:null,SubscriptionTaskPlaylist:Ie,formatDateLocale:C,getPlaylistItemIcon:w,isAssignmentExpired:M,isTaskLocked:z},Symbol.toStringTag,{value:"Module"}));export{he as R,Ie as S,M as a,Be as b,C as f,w as g,z as i};
